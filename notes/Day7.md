___
# Matrix 2
### 4. 행렬의 연산
##### 행렬의 요소 단위 연산
행과 열의 수가 같은 행렬은 산술 연산을 할 수 있다. 이 경우 벡터와 마찬가지로 산술 연산은 같은 위치의 요소 단위(element-by-element)로 이루어진다.
```r
> A <- matrix(1:9, nrow = 3, ncol = 3); A
     [,1] [,2] [,3]
[1,]    1    4    7
[2,]    2    5    8
[3,]    3    6    9
> B <- matrix(seq(from=10, length=9, by=10), nrow = 3, ncol = 3); B
     [,1] [,2] [,3]
[1,]   10   40   70
[2,]   20   50   80
[3,]   30   60   90
> A + B
     [,1] [,2] [,3]
[1,]   11   44   77
[2,]   22   55   88
[3,]   33   66   99
> B - A
     [,1] [,2] [,3]
[1,]    9   36   63
[2,]   18   45   72
[3,]   27   54   81
> A * B
     [,1] [,2] [,3]
[1,]   10  160  490
[2,]   40  250  640
[3,]   90  360  810
> B / A
     [,1] [,2] [,3]
[1,]   10   10   10
[2,]   10   10   10
[3,]   10   10   10
```
행렬은 재사용 되지 않는다.
행과 열의 개수가 다른 행렬의 산술연산은 오류를 발생시킨다. 그 이유로 행렬은 벡터와 달리 요소의 재사용이 일어나지 않기 때문이다. 그렇기 때문에 행렬과 행렬의 연산에서는 행과 열이 같은 크기이어야 한다.
```r
> C <- cbind(A, 10:12); C
     [,1] [,2] [,3] [,4]
[1,]    1    4    7   10
[2,]    2    5    8   11
[3,]    3    6    9   12
> B + c
Error in B + c : non-numeric argument to binary operator
> C <- rbind(A, 1:3); C
     [,1] [,2] [,3]
[1,]    1    4    7
[2,]    2    5    8
[3,]    3    6    9
[4,]    1    2    3
> B * C
Error in B * C : non-conformable arrays
```
##### 벡터와 행렬의 연산: 벡터는 재사용된다.
벡터와 행렬의 산술연산도 같은 위치의 요소 단위로 이루어진다. 벡터 a와 행렬 A의 연산시 벡터 a는 먼저 행렬 A와 같은 차원의 행렬로 변환되어 연산이 수행된다. 만약 벡터의 길이가 행렬의 길이보다 작으면 벡터의 데이터는 행렬의 길이만큼 순환 재사용된다. 연산을 위해 벡터가 행렬로 변환될 때도 matrix()로 행렬이 만들어질 때와 마찬가지로 열 별로 데이터이를 채워나간다.
``` r
> a <- 9:1
> a + A
     [,1] [,2] [,3]
[1,]   10   10   10
[2,]   10   10   10
[3,]   10   10   10
> a <- c(0, 10, 100)
> a + A
     [,1] [,2] [,3]
[1,]    1    4    7
[2,]   12   15   18
[3,]  103  106  109
> A * a
     [,1] [,2] [,3]
[1,]    0    0    0
[2,]   20   50   80
[3,]  300  600  900
> 10 * A
     [,1] [,2] [,3]
[1,]   10   40   70
[2,]   20   50   80
[3,]   30   60   90
> b <- 1:10
> b * A
Error: dims [product 9] do not match the length of object [10]
In addition: Warning message:
In b * A : longer o
```


### 5. 행렬과 함수
##### t()
 전치행렬(transposed matrix)을 만드는 함수
``` r
> A <- matrix(1:4, nrow = 2, ncol = 2); A
     [,1] [,2]
[1,]    1    3
[2,]    2    4
> t(A)
     [,1] [,2]
[1,]    1    2
[2,]    3    4
```

##### nrow(), ncol(), dim()
- nrow() : 행의 수를 반환
- ncol() : 열의 수를 반환
- dim() : 행과 열의 차원 전체를 반환
```r
> nrow(A)
[1] 2
> ncol(A)
[1] 2
> dim(A)
[1] 2 2
> attributes(A)
$dim
[1] 2 2
```

##### rownames(), colnames()
- rownames() : 행의 이름을 설정
- colnames() : 열의 이름을 설정
```r
> rownames(A)
NULL
> colnames(A)
NULL
> rownames(A) <- c("upper", "lower")
> colnames(A) <- c("left", "right")
> A
      left right
upper    1     3
lower    2     4
> attributes(A)
$dim
[1] 2 2

$dimnames
$dimnames[[1]]
[1] "upper" "lower"

$dimnames[[2]]
[1] "left"  "right"
```

##### as.vector(), c()
```r
> X <- rbind(1:5, 5:1); X
     [,1] [,2] [,3] [,4] [,5]
[1,]    1    2    3    4    5
[2,]    5    4    3    2    1
> x <- as.vector(X); x
 [1] 1 5 2 4 3 3 4 2 5 1
> attributes(x)
NULL
> y <- c(X); y
 [1] 1 5 2 4 3 3 4 2 5 1
> attributes(y)
NULL
```

##### 행렬에 벡터 함수 적용
```r
> sum(X)
[1] 30
> mean(X)
[1] 3
> sd(X)
[1] 1.490712
> range(X)
[1] 1 5
```


##### apply()
`apply(X, MARGIN, FUN, ...)`
- X : 행렬 또는 열별로 함수를 적용할 행렬
- MARGIN : 함수를 적용할 방향을 지정
	- 1 : 행, 세로
	- 2 : 열, 가로
- FUN : 행이나 열별로 적용할 함수를 전달
``` r
> set.seed(123)
> a <- sample(1:25); a
 [1] 15 19 14  3 10 18 11  5 23  6  9 21 24 20 22 25 17  1 12 13  2 16  7  8  4
> A <- matrix(a, nrow = 5, ncol = 5); A
     [,1] [,2] [,3] [,4] [,5]
[1,]   15   18    9   25    2
[2,]   19   11   21   17   16
[3,]   14    5   24    1    7
[4,]    3   23   20   12    8
[5,]   10    6   22   13    4
> apply(A, 2, sum)
[1] 61 63 96 68 37
> apply(A, 1, sum)
[1] 69 84 51 66 55
> sum(A)
[1] 325
> colnames(A) <- LETTERS[1:5]
> rownames(A) <- paste("X", 1:5, sep = "")
> A
    A  B  C  D  E
X1 15 18  9 25  2
X2 19 11 21 17 16
X3 14  5 24  1  7
X4  3 23 20 12  8
X5 10  6 22 13  4
> apply(A, 1, min)
X1 X2 X3 X4 X5 
 2 11  1  3  4 
> apply(A, 2, max)
 A  B  C  D  E 
19 23 24 25 16 
```

